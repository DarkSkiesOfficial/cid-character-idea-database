@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    box-sizing: border-box;
  }

  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    margin: 0;
    padding: 0;
  }

  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: #1a1a1a;
  }

  ::-webkit-scrollbar-thumb {
    background: #444;
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #555;
  }
}

@layer components {
  /* Button system */
  .btn-primary {
    @apply bg-accent-600 hover:bg-accent-500 text-white rounded-lg text-sm font-medium px-4 py-1.5 transition-colors cursor-pointer focus:outline-none focus:ring-1 focus:ring-accent-500;
  }

  .btn-secondary {
    @apply bg-surface-700 hover:bg-surface-600 text-surface-200 rounded-lg text-sm px-4 py-1.5 transition-colors cursor-pointer focus:outline-none focus:ring-1 focus:ring-accent-500;
  }

  .btn-ghost {
    @apply text-surface-400 hover:text-surface-200 hover:bg-surface-800 rounded-lg text-xs px-3 py-1.5 transition-colors cursor-pointer focus:outline-none focus:ring-1 focus:ring-accent-500;
  }

  .btn-danger {
    @apply bg-red-600 hover:bg-red-500 text-white rounded-lg text-sm font-medium px-4 py-1.5 transition-colors cursor-pointer focus:outline-none focus:ring-1 focus:ring-red-400;
  }

  .btn-danger-ghost {
    @apply bg-surface-800 hover:bg-red-900 text-surface-400 hover:text-red-300 rounded-lg text-sm px-4 py-1.5 transition-colors cursor-pointer focus:outline-none focus:ring-1 focus:ring-red-400;
  }

  .btn-toolbar {
    @apply flex items-center gap-1.5 px-2.5 py-1.5 rounded-md text-xs transition-colors text-surface-400 hover:text-surface-300 hover:bg-surface-700/50 cursor-pointer focus:outline-none focus:ring-1 focus:ring-accent-500;
  }

  .btn-toolbar-active {
    @apply flex items-center gap-1.5 px-2.5 py-1.5 rounded-md text-xs transition-colors bg-accent-500/20 text-accent-400 cursor-pointer focus:outline-none focus:ring-1 focus:ring-accent-500;
  }

  /* Form field system */
  .input-field {
    @apply bg-surface-800 text-surface-100 rounded-md px-3 py-2 text-sm placeholder-surface-600 focus:outline-none focus:ring-1 focus:ring-accent-500;
  }

  .select-field {
    @apply bg-surface-800 text-surface-200 text-sm rounded-md px-3 py-1.5 focus:outline-none focus:ring-1 focus:ring-accent-500 cursor-pointer;
  }

  /* View enter animation */
  @keyframes viewFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .view-enter {
    animation: viewFadeIn 150ms ease-out;
  }

  @keyframes imageFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .animate-fade-in {
    animation: imageFadeIn 300ms ease-out;
  }

  /* Markdown blockquote left border */
  .markdown-content blockquote {
    border-left-width: 3px;
  }

  /* Nested bold/italic inside blockquotes */
  .markdown-content blockquote strong {
    @apply font-bold text-surface-100;
  }

  .markdown-content blockquote em {
    @apply text-surface-200;
  }

  /* Line clamping fallback */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Ensure nested lists indent properly */
  .markdown-content ul ul,
  .markdown-content ol ol,
  .markdown-content ul ol,
  .markdown-content ol ul {
    @apply ml-4 mt-1;
  }
}

/* CoverFlow 3D cards */
.coverflow-card {
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  backface-visibility: hidden;
  will-change: transform, opacity;
  position: absolute;
}

.coverflow-card.center {
  box-shadow: 0 12px 60px rgba(0, 0, 0, 0.7), 0 0 40px rgba(139, 92, 246, 0.12);
  cursor: pointer;
}

@keyframes coverFlowProgress {
  from { width: 0%; }
  to { width: 100%; }
}

/* Range slider styling for split view image scale */
.accent-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #8b5cf6;
  cursor: pointer;
  border: none;
}

.accent-slider::-webkit-slider-runnable-track {
  height: 4px;
  border-radius: 2px;
  background: #495057;
}
